---
title: "Toronto Homicides"
author: "Tim Chisamore"
date: "`r format(Sys.Date())`"
output:
  html_document:
    keep_md: true
---

# 1 Introduction

The Toronto Police Service (TPS) provides data on homicides, shootings, and major crime indicators (MCI), among other things, through the Public Safety Data Portal.

We were interested in exploring homicides in Toronto through time and space using a variety of methods. 

# 2 Methods

Initiallty, the exploration of the Toronto homicide data was descriptive in nature. We began by looking at the number of homicides by year and continued graphically exploring other fields of interest.

We then applied the Early Aberration Reporting System (EARS) C1 algorithm to the data binned into yearmonths, i.e., values of the year and month, such as `r zoo::as.yearmon(Sys.Date())`.

# 3 Results

```{r setup, include=FALSE}

knitr::opts_chunk$set(
	echo = FALSE,
	message = FALSE,
	warning = FALSE,
	fig.width = 12,
	fig.height = 8
)

source(here::here("requirements.R"))

list_of_functions <- list.files(here::here("src", "functions"))

list_of_functions <-
	here::here("src", "functions", list_of_functions)

walk(list_of_functions, source)

```

```{r reading_data}

toronto_homicides <- reading_data()

```


```{r cleaaning_data, include=FALSE}

toronto_homicides_cleaned <- cleaning_data(toronto_homicides)

```

```{r formatting_data, include=FALSE}

toronto_homicides_cleaned_formatted <-
	formatting_data(toronto_homicides_cleaned)

```

```{r homicides_by_year_and_type}

homicides_by_year_and_type(toronto_homicides_cleaned_formatted)

```

```{r homicides_by_day_and_type}

homicides_by_day_and_type(toronto_homicides_cleaned_formatted)

```

```{r homicides_by_day_and_year}

homicides_by_day_and_year(toronto_homicides_cleaned_formatted)

```

```{r homicide_surveillance_by_yearmonth}

homicide_surveillance_by_yearmonth(toronto_homicides_cleaned_formatted)

```

```{r reading_spatial_data, include=FALSE}

toronto_neighbourhoods <- reading_spatial_data()

```

```{r cleaning_spatial_data, include=FALSE}

toronto_neighbourhoods_cleaned <-
  cleaning_spatial_data(toronto_neighbourhoods)

```

```{r homicides_by_year_and_neighbourhood}

walk(.x = 2004:2019, .f = homicides_by_year_and_neighbourhood, toronto_homicides_cleaned_formatted, toronto_neighbourhoods_cleaned)

```


# 4 Discussion